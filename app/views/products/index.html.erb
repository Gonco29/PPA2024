<h2 class="mt-5">Lista de Productos</h2>

<div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-4">
  <% @products.each do |product| %>
    <div class="col">
      <div class="card productcard h-100">
        <% if product.photos.present? %>
          <%= link_to product_path(product) do %>
            <%= cl_image_tag(product.photos.first.key, class: "card-img-top p-3", height: 200, width: 180, crop: :fill, alt: product.name) %>
          <% end %>
        <% end %>
        <div class="card-body d-flex flex-column">
          <p class="card-text text-secondary"><%= product.category %></p>
          <h5 class="card-title"><%= link_to product.name, product %></h5>
          <div class="mt-auto">
            <div class="d-flex justify-content-between align-items-center">
              <p class="card-text">$<%= product.price %></p>
              <%= link_to '#' , class: "btn btn-custom btn-primary btn-sm ms-3" do %>
                <i class="fas fa-plus"></i> Agregar
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if @products.empty? %>
  <p class="fst-italic">No se encontraron productos.</p>
<% end %>

<%= link_to "Nuevo Producto", new_product_path if policy(Product.new).create? %>
