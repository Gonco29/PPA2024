<!-- app/views/home.html.erb -->
<%# <div id="carouselExampleIndicators" class="carousel slide mt-1 p-5 bg-dark" data-bs-ride="carousel"> %>
<div id="carouselExampleIndicators" class="carousel slide mt-1 p-5 bg-dark" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="<%= asset_path('Banner1.png') %>" class="d-block w-100 banner-img" alt="Slide 1">
    </div>
    <div class="carousel-item">
      <img src="<%= asset_path('Banner2.png') %>" class="d-block w-100 banner-img" alt="Slide 2">
    </div>
    <div class="carousel-item">
      <img src="<%= asset_path('Banner3.png') %>" class="d-block w-100 banner-img" alt="Slide 3">
    </div>
    <div class="carousel-item">
      <img src="<%= asset_path('Banner4.png') %>" class="d-block w-100 banner-img" alt="Slide 4">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- PROMOCIONES -->

  <% if @promoted_products.present? %>
    <div class="container mt-5 text-center">
      <h2 class="mt-5 mb-4">Tenemos las mejores promociones del Mercado</h2>

        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-4 my-5 d-flex justify-content-center">
          <% [@promoted_products.last].each do |product| %>
            <%= render partial: 'products/product_card_promo', locals: { product: product } %>
          <% end %>
        </div>

        <div class="mt-4">
          <%= link_to "Ver más promociones", promotions_path, class: "btn btn-primary text-white btn-custom rounded-5" %>
        </div>
    </div>
  <% end %>

<!-- LOGOS DE MARCA -->

<div class=" mt-5 py-5", style="">
  <img src="<%= asset_path('PPAmarcasHome.png') %>" class="d-block w-100" alt="Marcas representadas" style="object-fit: scale-down;">
</div>

<!-- VIDEO DE PRESENTACIÓN -->
<div class="py-5" style="background-color: #E1E4E3">
  <div class="row mx-5">
    <div class="col-md-6 mx-auto">
      <% # Array de URLs con los dos nuevos videos %>
      <% videos = [
        "https://www.youtube.com/embed/0OAy8lpn2cc",
        "https://www.youtube.com/embed/xulgz6eNjfE"
      ] %>

      <% # Selecciona un video aleatorio %>
      <% selected_video = videos.sample %>

      <div class="embed-responsive embed-responsive-16by9 m-5">
        <iframe class="embed-responsive-item" width="560" height="315" src="<%= selected_video %>"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
        </iframe>
      </div>
    </div>
    <div class="col-md-6 mx-auto my-auto text-center">
      <h2 class="mb-3">Garantía de Seguridad</h2>
      <p class="mt-3 px-5 fs-4 fw-light text-gray">
        Motores con calidad SICHER. Vendemos únicamente ventilados Premium.
        Venta con y sin instalación
      </p>
    </div>
  </div>
</div>

<!-- FORMULARIO DE CONTACTO -->
<%= render "shared/contact_form" %>

<!-- MAPA -->

<div class="col-12 mx-2 mb-1">
  <div id="map"></div>
</div>

<script async
  src="https://maps.googleapis.com/maps/api/js?key=<%= @google_api_key %>&callback=initMap">
  // !!!!!!!!!!REEMPLAZAR CAMBIAR POR API KEY DEL DUEÑO!!!!!!!!!!!!!
</script>

<script>
  function initMap() {
    var location = {lat: -34.8978457839486, lng: -56.069537488069656};
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 16,
      center: location
    });
    var marker = new google.maps.Marker({
      position: location,
      map: map
    });
  }
</script>

<style>
  #map {
    height: 400px;
    width: 95%;
    margin-left: auto;
    margin-right: auto;
  }
</style>
